{"ast":null,"code":"import { useRef, useState, useCallback, useEffect } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar useLatest = function (val) {\n  var ref = useRef(val);\n  ref.current = val;\n  return ref;\n};\n\nvar _debounce = function (fn, delay) {\n  var timer; // eslint-disable-next-line func-names\n\n  return function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = null;\n    }\n\n    timer = setTimeout(function () {\n      return fn.apply(_this, args);\n    }, delay);\n  };\n};\n\nvar loadApiErr = \"ðŸ’¡ use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library\";\n\nvar usePlacesAutocomplete = function usePlacesAutocomplete(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      requestOptions = _ref.requestOptions,\n      _ref$debounce = _ref.debounce,\n      debounce = _ref$debounce === void 0 ? 200 : _ref$debounce,\n      _ref$cache = _ref.cache,\n      cache = _ref$cache === void 0 ? 24 * 60 * 60 : _ref$cache,\n      cacheKey = _ref.cacheKey,\n      googleMaps = _ref.googleMaps,\n      callbackName = _ref.callbackName,\n      _ref$defaultValue = _ref.defaultValue,\n      defaultValue = _ref$defaultValue === void 0 ? \"\" : _ref$defaultValue,\n      _ref$initOnMount = _ref.initOnMount,\n      initOnMount = _ref$initOnMount === void 0 ? true : _ref$initOnMount;\n\n  var _useState = useState(false),\n      ready = _useState[0],\n      setReady = _useState[1];\n\n  var _useState2 = useState(defaultValue),\n      value = _useState2[0],\n      setVal = _useState2[1];\n\n  var _useState3 = useState({\n    loading: false,\n    status: \"\",\n    data: []\n  }),\n      suggestions = _useState3[0],\n      setSuggestions = _useState3[1];\n\n  var asRef = useRef(null);\n  var requestOptionsRef = useLatest(requestOptions);\n  var googleMapsRef = useLatest(googleMaps);\n  var upaCacheKey = cacheKey ? \"upa-\" + cacheKey : \"upa\";\n  var init = useCallback(function () {\n    var _google$maps;\n\n    if (asRef.current) return;\n    var _window = window,\n        google = _window.google;\n    var gMaps = googleMapsRef.current;\n    var placesLib = (gMaps == null ? void 0 : gMaps.places) || (google == null ? void 0 : (_google$maps = google.maps) == null ? void 0 : _google$maps.places);\n\n    if (!placesLib) {\n      console.error(loadApiErr);\n      return;\n    }\n\n    asRef.current = new placesLib.AutocompleteService();\n    setReady(true);\n  }, []);\n  var clearSuggestions = useCallback(function () {\n    setSuggestions({\n      loading: false,\n      status: \"\",\n      data: []\n    });\n  }, []);\n  var clearCache = useCallback(function () {\n    try {\n      sessionStorage.removeItem(upaCacheKey);\n    } catch (error) {// Skip exception\n    }\n  }, []);\n  var fetchPredictions = useCallback(_debounce(function (val) {\n    if (!val) {\n      clearSuggestions();\n      return;\n    }\n\n    setSuggestions(function (prevState) {\n      return _extends({}, prevState, {\n        loading: true\n      });\n    });\n    var cachedData = {};\n\n    try {\n      cachedData = JSON.parse(sessionStorage.getItem(upaCacheKey) || \"{}\");\n    } catch (error) {// Skip exception\n    }\n\n    if (cache) {\n      cachedData = Object.keys(cachedData).reduce(function (acc, key) {\n        if (cachedData[key].maxAge - Date.now() >= 0) acc[key] = cachedData[key];\n        return acc;\n      }, {});\n\n      if (cachedData[val]) {\n        setSuggestions({\n          loading: false,\n          status: \"OK\",\n          data: cachedData[val].data\n        });\n        return;\n      }\n    } // @ts-expect-error\n\n\n    asRef.current.getPlacePredictions(_extends({}, requestOptionsRef.current, {\n      input: val\n    }), function (data, status) {\n      setSuggestions({\n        loading: false,\n        status: status,\n        data: data || []\n      });\n\n      if (cache && status === \"OK\") {\n        cachedData[val] = {\n          data: data,\n          maxAge: Date.now() + cache * 1000\n        };\n\n        try {\n          sessionStorage.setItem(upaCacheKey, JSON.stringify(cachedData));\n        } catch (error) {// Skip exception\n        }\n      }\n    });\n  }, debounce), [debounce, clearSuggestions]);\n  var setValue = useCallback(function (val, shouldFetchData) {\n    if (shouldFetchData === void 0) {\n      shouldFetchData = true;\n    }\n\n    setVal(val);\n    if (asRef.current && shouldFetchData) fetchPredictions(val);\n  }, [fetchPredictions]);\n  useEffect(function () {\n    if (!initOnMount) return function () {\n      return null;\n    };\n    var _window2 = window,\n        google = _window2.google;\n\n    if (!googleMapsRef.current && !(google != null && google.maps) && callbackName) {\n      window[callbackName] = init;\n    } else {\n      init();\n    }\n\n    return function () {\n      // @ts-expect-error\n      if (window[callbackName]) delete window[callbackName];\n    };\n  }, [callbackName, init]);\n  return {\n    ready: ready,\n    value: value,\n    suggestions: suggestions,\n    setValue: setValue,\n    clearSuggestions: clearSuggestions,\n    clearCache: clearCache,\n    init: init\n  };\n};\n/* eslint-disable compat/compat */\n\n\nvar geocodeErr = \"ðŸ’¡ use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions.\";\n\nvar getGeocode = function getGeocode(args) {\n  var geocoder = new window.google.maps.Geocoder();\n  return new Promise(function (resolve, reject) {\n    geocoder.geocode(args, function (results, status) {\n      if (status !== \"OK\") reject(status);\n\n      if (!args.address && args.componentRestrictions) {\n        console.error(geocodeErr);\n        resolve(results);\n      }\n\n      resolve(results);\n    });\n  });\n};\n\nvar getLatLng = function getLatLng(result) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var _result$geometry$loca = result.geometry.location,\n          lat = _result$geometry$loca.lat,\n          lng = _result$geometry$loca.lng;\n      resolve({\n        lat: lat(),\n        lng: lng()\n      });\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\n\nvar getZipCode = function getZipCode(result, useShortName) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var zipCode = null;\n      result.address_components.forEach(function (_ref) {\n        var long_name = _ref.long_name,\n            short_name = _ref.short_name,\n            types = _ref.types;\n        if (types.includes(\"postal_code\")) zipCode = useShortName ? short_name : long_name;\n      });\n      resolve(zipCode);\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\n\nvar getDetailsErr = \"ðŸ’¡ use-places-autocomplete: Please provide a place Id when using getDetails() either as a string or as part of an Autocomplete Prediction.\";\n\nvar getDetails = function getDetails(args) {\n  var PlacesService = new window.google.maps.places.PlacesService(document.createElement(\"div\"));\n\n  if (!args.placeId) {\n    console.error(getDetailsErr);\n    return Promise.reject(getDetailsErr);\n  }\n\n  return new Promise(function (resolve, reject) {\n    PlacesService.getDetails(args, function (results, status) {\n      if (status !== \"OK\") reject(status);\n      resolve(results);\n    });\n  });\n};\n\nexport { usePlacesAutocomplete as default, getDetails, getGeocode, getLatLng, getZipCode };","map":{"version":3,"sources":["/Users/rumen/Projects/google-maps-react-2020/node_modules/use-places-autocomplete/dist/index.esm.js"],"names":["useRef","useState","useCallback","useEffect","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","useLatest","val","ref","current","_debounce","fn","delay","timer","_this","_len","args","Array","_key","clearTimeout","setTimeout","loadApiErr","usePlacesAutocomplete","_temp","_ref","requestOptions","_ref$debounce","debounce","_ref$cache","cache","cacheKey","googleMaps","callbackName","_ref$defaultValue","defaultValue","_ref$initOnMount","initOnMount","_useState","ready","setReady","_useState2","value","setVal","_useState3","loading","status","data","suggestions","setSuggestions","asRef","requestOptionsRef","googleMapsRef","upaCacheKey","init","_google$maps","_window","window","google","gMaps","placesLib","places","maps","console","error","AutocompleteService","clearSuggestions","clearCache","sessionStorage","removeItem","fetchPredictions","prevState","cachedData","JSON","parse","getItem","keys","reduce","acc","maxAge","Date","now","getPlacePredictions","input","setItem","stringify","setValue","shouldFetchData","_window2","geocodeErr","getGeocode","geocoder","Geocoder","Promise","resolve","reject","geocode","results","address","componentRestrictions","getLatLng","result","_result$geometry$loca","geometry","location","lat","lng","getZipCode","useShortName","zipCode","address_components","forEach","long_name","short_name","types","includes","getDetailsErr","getDetails","PlacesService","document","createElement","placeId","default"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,QAAjB,EAA2BC,WAA3B,EAAwCC,SAAxC,QAAyD,OAAzD;;AAEA,SAASC,QAAT,GAAoB;AAClBA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAC5C,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AACzC,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAEA,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AACtB,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AACrDL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AACD;AACF;AACF;;AAED,WAAOL,MAAP;AACD,GAZD;;AAcA,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AACD;;AAED,IAAIQ,SAAS,GAAI,UAAUC,GAAV,EAAe;AAC9B,MAAIC,GAAG,GAAGnB,MAAM,CAACkB,GAAD,CAAhB;AACAC,EAAAA,GAAG,CAACC,OAAJ,GAAcF,GAAd;AACA,SAAOC,GAAP;AACD,CAJD;;AAMA,IAAIE,SAAS,GAAI,UAAUC,EAAV,EAAcC,KAAd,EAAqB;AACpC,MAAIC,KAAJ,CADoC,CACzB;;AAEX,SAAO,YAAY;AACjB,QAAIC,KAAK,GAAG,IAAZ;;AAEA,SAAK,IAAIC,IAAI,GAAGjB,SAAS,CAACC,MAArB,EAA6BiB,IAAI,GAAG,IAAIC,KAAJ,CAAUF,IAAV,CAApC,EAAqDG,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGH,IAA3E,EAAiFG,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAapB,SAAS,CAACoB,IAAD,CAAtB;AACD;;AAED,QAAIL,KAAK,KAAK,IAAd,EAAoB;AAClBM,MAAAA,YAAY,CAACN,KAAD,CAAZ;AACAA,MAAAA,KAAK,GAAG,IAAR;AACD;;AAEDA,IAAAA,KAAK,GAAGO,UAAU,CAAC,YAAY;AAC7B,aAAOT,EAAE,CAACN,KAAH,CAASS,KAAT,EAAgBE,IAAhB,CAAP;AACD,KAFiB,EAEfJ,KAFe,CAAlB;AAGD,GAfD;AAgBD,CAnBD;;AAqBA,IAAIS,UAAU,GAAG,uJAAjB;;AAEA,IAAIC,qBAAqB,GAAG,SAASA,qBAAT,CAA+BC,KAA/B,EAAsC;AAChE,MAAIC,IAAI,GAAGD,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;AAAA,MACIE,cAAc,GAAGD,IAAI,CAACC,cAD1B;AAAA,MAEIC,aAAa,GAAGF,IAAI,CAACG,QAFzB;AAAA,MAGIA,QAAQ,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2B,GAA3B,GAAiCA,aAHhD;AAAA,MAIIE,UAAU,GAAGJ,IAAI,CAACK,KAJtB;AAAA,MAKIA,KAAK,GAAGD,UAAU,KAAK,KAAK,CAApB,GAAwB,KAAK,EAAL,GAAU,EAAlC,GAAuCA,UALnD;AAAA,MAMIE,QAAQ,GAAGN,IAAI,CAACM,QANpB;AAAA,MAOIC,UAAU,GAAGP,IAAI,CAACO,UAPtB;AAAA,MAQIC,YAAY,GAAGR,IAAI,CAACQ,YARxB;AAAA,MASIC,iBAAiB,GAAGT,IAAI,CAACU,YAT7B;AAAA,MAUIA,YAAY,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,EAA/B,GAAoCA,iBAVvD;AAAA,MAWIE,gBAAgB,GAAGX,IAAI,CAACY,WAX5B;AAAA,MAYIA,WAAW,GAAGD,gBAAgB,KAAK,KAAK,CAA1B,GAA8B,IAA9B,GAAqCA,gBAZvD;;AAcA,MAAIE,SAAS,GAAG/C,QAAQ,CAAC,KAAD,CAAxB;AAAA,MACIgD,KAAK,GAAGD,SAAS,CAAC,CAAD,CADrB;AAAA,MAEIE,QAAQ,GAAGF,SAAS,CAAC,CAAD,CAFxB;;AAIA,MAAIG,UAAU,GAAGlD,QAAQ,CAAC4C,YAAD,CAAzB;AAAA,MACIO,KAAK,GAAGD,UAAU,CAAC,CAAD,CADtB;AAAA,MAEIE,MAAM,GAAGF,UAAU,CAAC,CAAD,CAFvB;;AAIA,MAAIG,UAAU,GAAGrD,QAAQ,CAAC;AACxBsD,IAAAA,OAAO,EAAE,KADe;AAExBC,IAAAA,MAAM,EAAE,EAFgB;AAGxBC,IAAAA,IAAI,EAAE;AAHkB,GAAD,CAAzB;AAAA,MAKIC,WAAW,GAAGJ,UAAU,CAAC,CAAD,CAL5B;AAAA,MAMIK,cAAc,GAAGL,UAAU,CAAC,CAAD,CAN/B;;AAQA,MAAIM,KAAK,GAAG5D,MAAM,CAAC,IAAD,CAAlB;AACA,MAAI6D,iBAAiB,GAAG5C,SAAS,CAACmB,cAAD,CAAjC;AACA,MAAI0B,aAAa,GAAG7C,SAAS,CAACyB,UAAD,CAA7B;AACA,MAAIqB,WAAW,GAAGtB,QAAQ,GAAG,SAASA,QAAZ,GAAuB,KAAjD;AACA,MAAIuB,IAAI,GAAG9D,WAAW,CAAC,YAAY;AACjC,QAAI+D,YAAJ;;AAEA,QAAIL,KAAK,CAACxC,OAAV,EAAmB;AACnB,QAAI8C,OAAO,GAAGC,MAAd;AAAA,QACIC,MAAM,GAAGF,OAAO,CAACE,MADrB;AAEA,QAAIC,KAAK,GAAGP,aAAa,CAAC1C,OAA1B;AACA,QAAIkD,SAAS,GAAG,CAACD,KAAK,IAAI,IAAT,GAAgB,KAAK,CAArB,GAAyBA,KAAK,CAACE,MAAhC,MAA4CH,MAAM,IAAI,IAAV,GAAiB,KAAK,CAAtB,GAA0B,CAACH,YAAY,GAAGG,MAAM,CAACI,IAAvB,KAAgC,IAAhC,GAAuC,KAAK,CAA5C,GAAgDP,YAAY,CAACM,MAAnI,CAAhB;;AAEA,QAAI,CAACD,SAAL,EAAgB;AACdG,MAAAA,OAAO,CAACC,KAAR,CAAc1C,UAAd;AACA;AACD;;AAED4B,IAAAA,KAAK,CAACxC,OAAN,GAAgB,IAAIkD,SAAS,CAACK,mBAAd,EAAhB;AACAzB,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,GAhBqB,EAgBnB,EAhBmB,CAAtB;AAiBA,MAAI0B,gBAAgB,GAAG1E,WAAW,CAAC,YAAY;AAC7CyD,IAAAA,cAAc,CAAC;AACbJ,MAAAA,OAAO,EAAE,KADI;AAEbC,MAAAA,MAAM,EAAE,EAFK;AAGbC,MAAAA,IAAI,EAAE;AAHO,KAAD,CAAd;AAKD,GANiC,EAM/B,EAN+B,CAAlC;AAOA,MAAIoB,UAAU,GAAG3E,WAAW,CAAC,YAAY;AACvC,QAAI;AACF4E,MAAAA,cAAc,CAACC,UAAf,CAA0BhB,WAA1B;AACD,KAFD,CAEE,OAAOW,KAAP,EAAc,CAAC;AAChB;AACF,GAL2B,EAKzB,EALyB,CAA5B;AAMA,MAAIM,gBAAgB,GAAG9E,WAAW,CAACmB,SAAS,CAAC,UAAUH,GAAV,EAAe;AAC1D,QAAI,CAACA,GAAL,EAAU;AACR0D,MAAAA,gBAAgB;AAChB;AACD;;AAEDjB,IAAAA,cAAc,CAAC,UAAUsB,SAAV,EAAqB;AAClC,aAAO7E,QAAQ,CAAC,EAAD,EAAK6E,SAAL,EAAgB;AAC7B1B,QAAAA,OAAO,EAAE;AADoB,OAAhB,CAAf;AAGD,KAJa,CAAd;AAKA,QAAI2B,UAAU,GAAG,EAAjB;;AAEA,QAAI;AACFA,MAAAA,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWN,cAAc,CAACO,OAAf,CAAuBtB,WAAvB,KAAuC,IAAlD,CAAb;AACD,KAFD,CAEE,OAAOW,KAAP,EAAc,CAAC;AAChB;;AAED,QAAIlC,KAAJ,EAAW;AACT0C,MAAAA,UAAU,GAAG7E,MAAM,CAACiF,IAAP,CAAYJ,UAAZ,EAAwBK,MAAxB,CAA+B,UAAUC,GAAV,EAAe5E,GAAf,EAAoB;AAC9D,YAAIsE,UAAU,CAACtE,GAAD,CAAV,CAAgB6E,MAAhB,GAAyBC,IAAI,CAACC,GAAL,EAAzB,IAAuC,CAA3C,EAA8CH,GAAG,CAAC5E,GAAD,CAAH,GAAWsE,UAAU,CAACtE,GAAD,CAArB;AAC9C,eAAO4E,GAAP;AACD,OAHY,EAGV,EAHU,CAAb;;AAKA,UAAIN,UAAU,CAAChE,GAAD,CAAd,EAAqB;AACnByC,QAAAA,cAAc,CAAC;AACbJ,UAAAA,OAAO,EAAE,KADI;AAEbC,UAAAA,MAAM,EAAE,IAFK;AAGbC,UAAAA,IAAI,EAAEyB,UAAU,CAAChE,GAAD,CAAV,CAAgBuC;AAHT,SAAD,CAAd;AAKA;AACD;AACF,KAhCyD,CAgCxD;;;AAGFG,IAAAA,KAAK,CAACxC,OAAN,CAAcwE,mBAAd,CAAkCxF,QAAQ,CAAC,EAAD,EAAKyD,iBAAiB,CAACzC,OAAvB,EAAgC;AACxEyE,MAAAA,KAAK,EAAE3E;AADiE,KAAhC,CAA1C,EAEI,UAAUuC,IAAV,EAAgBD,MAAhB,EAAwB;AAC1BG,MAAAA,cAAc,CAAC;AACbJ,QAAAA,OAAO,EAAE,KADI;AAEbC,QAAAA,MAAM,EAAEA,MAFK;AAGbC,QAAAA,IAAI,EAAEA,IAAI,IAAI;AAHD,OAAD,CAAd;;AAMA,UAAIjB,KAAK,IAAIgB,MAAM,KAAK,IAAxB,EAA8B;AAC5B0B,QAAAA,UAAU,CAAChE,GAAD,CAAV,GAAkB;AAChBuC,UAAAA,IAAI,EAAEA,IADU;AAEhBgC,UAAAA,MAAM,EAAEC,IAAI,CAACC,GAAL,KAAanD,KAAK,GAAG;AAFb,SAAlB;;AAKA,YAAI;AACFsC,UAAAA,cAAc,CAACgB,OAAf,CAAuB/B,WAAvB,EAAoCoB,IAAI,CAACY,SAAL,CAAeb,UAAf,CAApC;AACD,SAFD,CAEE,OAAOR,KAAP,EAAc,CAAC;AAChB;AACF;AACF,KApBD;AAqBD,GAxD2C,EAwDzCpC,QAxDyC,CAAV,EAwDpB,CAACA,QAAD,EAAWsC,gBAAX,CAxDoB,CAAlC;AAyDA,MAAIoB,QAAQ,GAAG9F,WAAW,CAAC,UAAUgB,GAAV,EAAe+E,eAAf,EAAgC;AACzD,QAAIA,eAAe,KAAK,KAAK,CAA7B,EAAgC;AAC9BA,MAAAA,eAAe,GAAG,IAAlB;AACD;;AAED5C,IAAAA,MAAM,CAACnC,GAAD,CAAN;AACA,QAAI0C,KAAK,CAACxC,OAAN,IAAiB6E,eAArB,EAAsCjB,gBAAgB,CAAC9D,GAAD,CAAhB;AACvC,GAPyB,EAOvB,CAAC8D,gBAAD,CAPuB,CAA1B;AAQA7E,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAI,CAAC4C,WAAL,EAAkB,OAAO,YAAY;AACnC,aAAO,IAAP;AACD,KAFiB;AAGlB,QAAImD,QAAQ,GAAG/B,MAAf;AAAA,QACIC,MAAM,GAAG8B,QAAQ,CAAC9B,MADtB;;AAGA,QAAI,CAACN,aAAa,CAAC1C,OAAf,IAA0B,EAAEgD,MAAM,IAAI,IAAV,IAAkBA,MAAM,CAACI,IAA3B,CAA1B,IAA8D7B,YAAlE,EAAgF;AAC9EwB,MAAAA,MAAM,CAACxB,YAAD,CAAN,GAAuBqB,IAAvB;AACD,KAFD,MAEO;AACLA,MAAAA,IAAI;AACL;;AAED,WAAO,YAAY;AACjB;AACA,UAAIG,MAAM,CAACxB,YAAD,CAAV,EAA0B,OAAOwB,MAAM,CAACxB,YAAD,CAAb;AAC3B,KAHD;AAID,GAjBQ,EAiBN,CAACA,YAAD,EAAeqB,IAAf,CAjBM,CAAT;AAkBA,SAAO;AACLf,IAAAA,KAAK,EAAEA,KADF;AAELG,IAAAA,KAAK,EAAEA,KAFF;AAGLM,IAAAA,WAAW,EAAEA,WAHR;AAILsC,IAAAA,QAAQ,EAAEA,QAJL;AAKLpB,IAAAA,gBAAgB,EAAEA,gBALb;AAMLC,IAAAA,UAAU,EAAEA,UANP;AAOLb,IAAAA,IAAI,EAAEA;AAPD,GAAP;AASD,CA7JD;AA+JA;;;AACA,IAAImC,UAAU,GAAG,+GAAjB;;AACA,IAAIC,UAAU,GAAG,SAASA,UAAT,CAAoBzE,IAApB,EAA0B;AACzC,MAAI0E,QAAQ,GAAG,IAAIlC,MAAM,CAACC,MAAP,CAAcI,IAAd,CAAmB8B,QAAvB,EAAf;AACA,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5CJ,IAAAA,QAAQ,CAACK,OAAT,CAAiB/E,IAAjB,EAAuB,UAAUgF,OAAV,EAAmBnD,MAAnB,EAA2B;AAChD,UAAIA,MAAM,KAAK,IAAf,EAAqBiD,MAAM,CAACjD,MAAD,CAAN;;AAErB,UAAI,CAAC7B,IAAI,CAACiF,OAAN,IAAiBjF,IAAI,CAACkF,qBAA1B,EAAiD;AAC/CpC,QAAAA,OAAO,CAACC,KAAR,CAAcyB,UAAd;AACAK,QAAAA,OAAO,CAACG,OAAD,CAAP;AACD;;AAEDH,MAAAA,OAAO,CAACG,OAAD,CAAP;AACD,KATD;AAUD,GAXM,CAAP;AAYD,CAdD;;AAeA,IAAIG,SAAS,GAAG,SAASA,SAAT,CAAmBC,MAAnB,EAA2B;AACzC,SAAO,IAAIR,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAI;AACF,UAAIO,qBAAqB,GAAGD,MAAM,CAACE,QAAP,CAAgBC,QAA5C;AAAA,UACIC,GAAG,GAAGH,qBAAqB,CAACG,GADhC;AAAA,UAEIC,GAAG,GAAGJ,qBAAqB,CAACI,GAFhC;AAGAZ,MAAAA,OAAO,CAAC;AACNW,QAAAA,GAAG,EAAEA,GAAG,EADF;AAENC,QAAAA,GAAG,EAAEA,GAAG;AAFF,OAAD,CAAP;AAID,KARD,CAQE,OAAO1C,KAAP,EAAc;AACd+B,MAAAA,MAAM,CAAC/B,KAAD,CAAN;AACD;AACF,GAZM,CAAP;AAaD,CAdD;;AAeA,IAAI2C,UAAU,GAAG,SAASA,UAAT,CAAoBN,MAApB,EAA4BO,YAA5B,EAA0C;AACzD,SAAO,IAAIf,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAI;AACF,UAAIc,OAAO,GAAG,IAAd;AACAR,MAAAA,MAAM,CAACS,kBAAP,CAA0BC,OAA1B,CAAkC,UAAUtF,IAAV,EAAgB;AAChD,YAAIuF,SAAS,GAAGvF,IAAI,CAACuF,SAArB;AAAA,YACIC,UAAU,GAAGxF,IAAI,CAACwF,UADtB;AAAA,YAEIC,KAAK,GAAGzF,IAAI,CAACyF,KAFjB;AAGA,YAAIA,KAAK,CAACC,QAAN,CAAe,aAAf,CAAJ,EAAmCN,OAAO,GAAGD,YAAY,GAAGK,UAAH,GAAgBD,SAAtC;AACpC,OALD;AAMAlB,MAAAA,OAAO,CAACe,OAAD,CAAP;AACD,KATD,CASE,OAAO7C,KAAP,EAAc;AACd+B,MAAAA,MAAM,CAAC/B,KAAD,CAAN;AACD;AACF,GAbM,CAAP;AAcD,CAfD;;AAgBA,IAAIoD,aAAa,GAAG,4IAApB;;AACA,IAAIC,UAAU,GAAG,SAASA,UAAT,CAAoBpG,IAApB,EAA0B;AACzC,MAAIqG,aAAa,GAAG,IAAI7D,MAAM,CAACC,MAAP,CAAcI,IAAd,CAAmBD,MAAnB,CAA0ByD,aAA9B,CAA4CC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAA5C,CAApB;;AAEA,MAAI,CAACvG,IAAI,CAACwG,OAAV,EAAmB;AACjB1D,IAAAA,OAAO,CAACC,KAAR,CAAcoD,aAAd;AACA,WAAOvB,OAAO,CAACE,MAAR,CAAeqB,aAAf,CAAP;AACD;;AAED,SAAO,IAAIvB,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5CuB,IAAAA,aAAa,CAACD,UAAd,CAAyBpG,IAAzB,EAA+B,UAAUgF,OAAV,EAAmBnD,MAAnB,EAA2B;AACxD,UAAIA,MAAM,KAAK,IAAf,EAAqBiD,MAAM,CAACjD,MAAD,CAAN;AACrBgD,MAAAA,OAAO,CAACG,OAAD,CAAP;AACD,KAHD;AAID,GALM,CAAP;AAMD,CAdD;;AAgBA,SAAS1E,qBAAqB,IAAImG,OAAlC,EAA2CL,UAA3C,EAAuD3B,UAAvD,EAAmEU,SAAnE,EAA8EO,UAA9E","sourcesContent":["import { useRef, useState, useCallback, useEffect } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar useLatest = (function (val) {\n  var ref = useRef(val);\n  ref.current = val;\n  return ref;\n});\n\nvar _debounce = (function (fn, delay) {\n  var timer; // eslint-disable-next-line func-names\n\n  return function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = null;\n    }\n\n    timer = setTimeout(function () {\n      return fn.apply(_this, args);\n    }, delay);\n  };\n});\n\nvar loadApiErr = \"ðŸ’¡ use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library\";\n\nvar usePlacesAutocomplete = function usePlacesAutocomplete(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      requestOptions = _ref.requestOptions,\n      _ref$debounce = _ref.debounce,\n      debounce = _ref$debounce === void 0 ? 200 : _ref$debounce,\n      _ref$cache = _ref.cache,\n      cache = _ref$cache === void 0 ? 24 * 60 * 60 : _ref$cache,\n      cacheKey = _ref.cacheKey,\n      googleMaps = _ref.googleMaps,\n      callbackName = _ref.callbackName,\n      _ref$defaultValue = _ref.defaultValue,\n      defaultValue = _ref$defaultValue === void 0 ? \"\" : _ref$defaultValue,\n      _ref$initOnMount = _ref.initOnMount,\n      initOnMount = _ref$initOnMount === void 0 ? true : _ref$initOnMount;\n\n  var _useState = useState(false),\n      ready = _useState[0],\n      setReady = _useState[1];\n\n  var _useState2 = useState(defaultValue),\n      value = _useState2[0],\n      setVal = _useState2[1];\n\n  var _useState3 = useState({\n    loading: false,\n    status: \"\",\n    data: []\n  }),\n      suggestions = _useState3[0],\n      setSuggestions = _useState3[1];\n\n  var asRef = useRef(null);\n  var requestOptionsRef = useLatest(requestOptions);\n  var googleMapsRef = useLatest(googleMaps);\n  var upaCacheKey = cacheKey ? \"upa-\" + cacheKey : \"upa\";\n  var init = useCallback(function () {\n    var _google$maps;\n\n    if (asRef.current) return;\n    var _window = window,\n        google = _window.google;\n    var gMaps = googleMapsRef.current;\n    var placesLib = (gMaps == null ? void 0 : gMaps.places) || (google == null ? void 0 : (_google$maps = google.maps) == null ? void 0 : _google$maps.places);\n\n    if (!placesLib) {\n      console.error(loadApiErr);\n      return;\n    }\n\n    asRef.current = new placesLib.AutocompleteService();\n    setReady(true);\n  }, []);\n  var clearSuggestions = useCallback(function () {\n    setSuggestions({\n      loading: false,\n      status: \"\",\n      data: []\n    });\n  }, []);\n  var clearCache = useCallback(function () {\n    try {\n      sessionStorage.removeItem(upaCacheKey);\n    } catch (error) {// Skip exception\n    }\n  }, []);\n  var fetchPredictions = useCallback(_debounce(function (val) {\n    if (!val) {\n      clearSuggestions();\n      return;\n    }\n\n    setSuggestions(function (prevState) {\n      return _extends({}, prevState, {\n        loading: true\n      });\n    });\n    var cachedData = {};\n\n    try {\n      cachedData = JSON.parse(sessionStorage.getItem(upaCacheKey) || \"{}\");\n    } catch (error) {// Skip exception\n    }\n\n    if (cache) {\n      cachedData = Object.keys(cachedData).reduce(function (acc, key) {\n        if (cachedData[key].maxAge - Date.now() >= 0) acc[key] = cachedData[key];\n        return acc;\n      }, {});\n\n      if (cachedData[val]) {\n        setSuggestions({\n          loading: false,\n          status: \"OK\",\n          data: cachedData[val].data\n        });\n        return;\n      }\n    } // @ts-expect-error\n\n\n    asRef.current.getPlacePredictions(_extends({}, requestOptionsRef.current, {\n      input: val\n    }), function (data, status) {\n      setSuggestions({\n        loading: false,\n        status: status,\n        data: data || []\n      });\n\n      if (cache && status === \"OK\") {\n        cachedData[val] = {\n          data: data,\n          maxAge: Date.now() + cache * 1000\n        };\n\n        try {\n          sessionStorage.setItem(upaCacheKey, JSON.stringify(cachedData));\n        } catch (error) {// Skip exception\n        }\n      }\n    });\n  }, debounce), [debounce, clearSuggestions]);\n  var setValue = useCallback(function (val, shouldFetchData) {\n    if (shouldFetchData === void 0) {\n      shouldFetchData = true;\n    }\n\n    setVal(val);\n    if (asRef.current && shouldFetchData) fetchPredictions(val);\n  }, [fetchPredictions]);\n  useEffect(function () {\n    if (!initOnMount) return function () {\n      return null;\n    };\n    var _window2 = window,\n        google = _window2.google;\n\n    if (!googleMapsRef.current && !(google != null && google.maps) && callbackName) {\n      window[callbackName] = init;\n    } else {\n      init();\n    }\n\n    return function () {\n      // @ts-expect-error\n      if (window[callbackName]) delete window[callbackName];\n    };\n  }, [callbackName, init]);\n  return {\n    ready: ready,\n    value: value,\n    suggestions: suggestions,\n    setValue: setValue,\n    clearSuggestions: clearSuggestions,\n    clearCache: clearCache,\n    init: init\n  };\n};\n\n/* eslint-disable compat/compat */\nvar geocodeErr = \"ðŸ’¡ use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions.\";\nvar getGeocode = function getGeocode(args) {\n  var geocoder = new window.google.maps.Geocoder();\n  return new Promise(function (resolve, reject) {\n    geocoder.geocode(args, function (results, status) {\n      if (status !== \"OK\") reject(status);\n\n      if (!args.address && args.componentRestrictions) {\n        console.error(geocodeErr);\n        resolve(results);\n      }\n\n      resolve(results);\n    });\n  });\n};\nvar getLatLng = function getLatLng(result) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var _result$geometry$loca = result.geometry.location,\n          lat = _result$geometry$loca.lat,\n          lng = _result$geometry$loca.lng;\n      resolve({\n        lat: lat(),\n        lng: lng()\n      });\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\nvar getZipCode = function getZipCode(result, useShortName) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var zipCode = null;\n      result.address_components.forEach(function (_ref) {\n        var long_name = _ref.long_name,\n            short_name = _ref.short_name,\n            types = _ref.types;\n        if (types.includes(\"postal_code\")) zipCode = useShortName ? short_name : long_name;\n      });\n      resolve(zipCode);\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\nvar getDetailsErr = \"ðŸ’¡ use-places-autocomplete: Please provide a place Id when using getDetails() either as a string or as part of an Autocomplete Prediction.\";\nvar getDetails = function getDetails(args) {\n  var PlacesService = new window.google.maps.places.PlacesService(document.createElement(\"div\"));\n\n  if (!args.placeId) {\n    console.error(getDetailsErr);\n    return Promise.reject(getDetailsErr);\n  }\n\n  return new Promise(function (resolve, reject) {\n    PlacesService.getDetails(args, function (results, status) {\n      if (status !== \"OK\") reject(status);\n      resolve(results);\n    });\n  });\n};\n\nexport { usePlacesAutocomplete as default, getDetails, getGeocode, getLatLng, getZipCode };\n"]},"metadata":{},"sourceType":"module"}